{% extends 'account/base.html' %}
{% load static %}
{% load socialaccount %}

{% block content %}

<div class="small-margin extra-top-margin container-fluid row">
    <div class="col-sm-11">
       <div class="panel panel-success">
            <div class="panel-heading">
                <h1 class="panel-title">Edit Your Account Profile</h1>
            </div>
           <div class="panel-body">
                <form action="" method="post">{% csrf_token %}
                    {{ form.as_p}}


                    <input class="btn btn-success" type="submit" value="Update" />
                    <a href="{% url 'profile:profile' %}"><div class="btn btn-warning">Cancel</div></a>
                </form>
            </br>
            {% if not form.accounts %}
                <p>You have not connected your account with any third party accounts.</p>
                <p><strong>Connect a third-party account:</strong></p>
                <div class="socialaccount_providers btn btn-primary" style="list-style-type: none;">
                   {% include "socialaccount/snippets/provider_list.html" with process="connect" %}
                </div>
            {% else %}
                You have connected your account with the following third-party accounts:

                {% for base_account in form.accounts %}
                    {% with base_account.get_provider_account as account %}
                        <div>
                            <span class="socialaccount_provider {{base_account.provider}} {{account.get_brand.id}}">{{account.get_brand.name}} - </span>
                            {{account}}
                        </div>
                    {% endwith %}
                {% endfor %}
            <p><a href="{% url 'socialaccount_connections' %}">Connect another account</a></p></br>
            {% endif %}
            </div>
       </div>
    </div>
</div>

{% endblock content %}
